@page
@model WebApplication1.Pages.RegisterModel
@{
}

<div class="container mt-5">

    <div class="row justify-content-center align-items-center">

        <div class="col-sm-12 col-md-12 col-lg-4">
            <h1 class="mb-3">Register </h1>

            <form method="post">
                <div asp-validation-summary="All" class="text-danger"></div>

                <input type="hidden" id="g-recaptcha-response" name="g-recaptcha-response" />

                <div class="mb-3">
                    <label class="form-label" asp-for="RModel.Email">Email Address</label>
                    <input type="email" asp-for="RModel.Email" class="form-control" />
                    <span asp-validation-for="RModel.Email" class="text-danger"></span>
                </div>

                @* NEW *@
                <div class="mb-3">
                    <label class="form-label" asp-for="RModel.FirstName">FirstName</label>
                    <input type="text" asp-for="RModel.FirstName" class="form-control" />
                    <span asp-validation-for="RModel.FirstName" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label class="form-label" asp-for="RModel.LastName">LastName</label>
                    <input type="text" asp-for="RModel.LastName" class="form-control" />
                    <span asp-validation-for="RModel.LastName" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label class="form-label" asp-for="RModel.CreditCard">Credit Card</label>
                    <input type="text" asp-for="RModel.CreditCard" class="form-control" />
                    <span asp-validation-for="RModel.CreditCard" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label class="form-label" asp-for="RModel.BillingAddress">BillingAddress</label>
                    <input type="text" asp-for="RModel.BillingAddress" class="form-control" />
                    <span asp-validation-for="RModel.BillingAddress" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label class="form-label" asp-for="RModel.ShippingAddress">ShippingAddress</label>
                    <input type="text" asp-for="RModel.ShippingAddress" class="form-control" />
                    <span asp-validation-for="RModel.ShippingAddress" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label class="form-label" asp-for="RModel.PhoneNumber">PhoneNumber</label>
                    <input type="tel" asp-for="RModel.PhoneNumber" class="form-control" />
                    <span asp-validation-for="RModel.PhoneNumber" class="text-danger"></span>
                </div>
                @* password *@

                <div class="mb-3">
                    <label class="form-label" asp-for="RModel.Password">Password</label>
                    <input type="password" id="password" asp-for="RModel.Password" class="form-control" />
                    <div id="passwordHelp" class="form-text"></div>
                    <span asp-validation-for="RModel.Password" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label class="form-label" asp-for="RModel.ConfirmPassword">Confirm Password</label>
                    <input type="password" asp-for="RModel.ConfirmPassword" class="form-control" />
                    <span asp-validation-for="RModel.ConfirmPassword" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <button type="submit" class="btn btn-primary">Register</button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script src="https://www.google.com/recaptcha/api.js?render=6Lf84lksAAAAABm98gkv_-gkbJ1Wk4FFS0UODKa0"></script>
    <script>
        grecaptcha.ready(function () {
            grecaptcha.execute('6Lf84lksAAAAABm98gkv_-gkbJ1Wk4FFS0UODKa0', { action: 'register' }).then(function (token) {
                var el = document.getElementById('g-recaptcha-response');
                if (el) el.value = token;
            });
        });
    </script>

    <script>
        (function () {
            var password = document.getElementById('password');
            var help = document.getElementById('passwordHelp');
            if (!password || !help) return;

            function score(pw) {
                var score = 0;
                if (!pw) return 0;
                if (pw.length >= 12) score += 2;
                if (/[a-z]/.test(pw)) score += 1;
                if (/[A-Z]/.test(pw)) score += 1;
                if (/\d/.test(pw)) score += 1;
                if (/[^A-Za-z0-9]/.test(pw)) score += 1;
                return score; // 0..6
            }

            function labelForScore(s) {
                if (s >= 6) return 'STRONG';
                if (s >= 4) return 'Good';
                if (s >= 2) return 'Weak';
                return 'Very weak';
            }

            password.addEventListener('input', function (e) {
                var s = score(e.target.value);
                help.textContent = 'Password strength: ' + labelForScore(s);
                help.className = 'form-text';
                if (s >= 6) help.classList.add('text-success');
                else if (s >= 4) help.classList.add('text-warning');
                else help.classList.add('text-danger');
            });
        })();
    </script>
}